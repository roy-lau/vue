@import "./variable.scss";

// 循环生成主题样式
@mixin themify($themes: $themes) {
  @each $theme-name, $map in $themes {
    // & 表示父级元素
    // !global 表示覆盖原来的
    body[data-theme="#{$theme-name}"] & {
      $theme-map: () !global;
      // 循环合并键值对
      @each $key, $value in $map {
        $theme-map: map-merge($theme-map, ($key: $value)) !global;
      }
      // 表示包含 下面函数 themed()
      @content;

      $theme-map: null !global;
    }
  }
}

// 获取主题 map 函数
@function themed($key) {
  @return map-get($theme-map, $key);
}

// 背景颜色
@mixin bg_color($color, $important: null){
  @include themify {
    background-color: themed(bg-color-#{$color}) $important;
  }
}

// 字体颜色
@mixin text_color($color, $important: null){
  @include themify {
    color: themed(text-color-#{$color}) $important;
  }
}

// 边框颜色
@mixin border_color($color, $position: null, $important: null){
  @include themify {
    border#{$position}-color: themed(border-color-#{$color}) $important;
  }
}

// 阴影样式
@mixin box_shadow($color, $important: null){
  @include themify {
    box-shadow: themed(box-shadow-#{$color}) $important;
  }
}

// 文字大小
@mixin font_color($size, $important: null){
  @include themify {
    font-size: themed('font-size-'#{$size}) $important;
  }
}

// 滚动条
@mixin scrollbar($width: 10px, $height: 10px) {
  &::-webkit-scrollbar {
    width: $width;
    height: $height;
  }

  &::-webkit-scrollbar-thumb {
    @include bg_color('scrollbar');
    border-radius: 1px;
    transition: background-color 0.3s;

    &:hover, &:active {
      width: $width + 2px;
      height: $height + 2px;
      @include bg_color('scrollbar-hover');
    }
  }

  &::-webkit-scrollbar-track, &::-webkit-scrollbar-track-piece {
    display: none;
  }
  
  &::-webkit-scrollbar-corner {
    display: none;
  }
}
